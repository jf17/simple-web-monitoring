# Мониторинг веб-сервисов

Простая программа на Go для мониторинга доступности веб-сервисов с веб-интерфейсом.

## Возможности

- Мониторинг веб-сервисов по HTTP запросам (проверка статуса 200 OK)
- Веб-интерфейс для просмотра статуса сервисов
- Индикаторы статуса: зеленый (доступен) / красный (недоступен)
- Добавление новых сервисов через веб-интерфейс
- Удаление сервисов с подтверждением (кнопка с красным крестиком)
- Автоматическое сохранение списка сервисов в файл `services.json`
- Загрузка сервисов из файла при запуске программы
- Проверка доступности в реальном времени при каждом запросе
- Автообновление интерфейса каждые 10 секунд с обратным счетчиком
- Кнопка для ручного обновления данных

## Запуск

### Обычный запуск

Программа требует обязательного указания порта через флаг `-port`:

```bash
go run main.go -port=8080
```

Или используя Makefile:

```bash
# Запуск на порту 8080 (по умолчанию)
make run

# Запуск на произвольном порту
make run-port PORT=3000
```

### Запуск через Docker

```bash
# Сборка Docker образа
make docker-build

# Создание docker-compose.yml для указанного порта
make docker-compose PORT=8080

# Запуск через Docker Compose
make docker-up PORT=8080

# Остановка
make docker-down
```

После запуска откройте браузер и перейдите по адресу: http://localhost:ПОРТ (например, http://localhost:8080)

## Использование

1. При первом запуске программа создает файл `services.json` с тестовыми сервисами (Google и GitHub)
2. При последующих запусках программа загружает сервисы из файла `services.json`
3. Статус сервисов проверяется в реальном времени при каждом обращении к API
4. Для добавления нового сервиса заполните форму внизу страницы
5. Для удаления сервиса нажмите красный крестик (×) напротив нужного сервиса
6. Все изменения (добавление/удаление) автоматически сохраняются в файл
7. Список автоматически обновляется каждые 10 секунд
8. Обратный счетчик показывает время до следующего обновления
9. Кнопка "Обновить сейчас" позволяет обновить данные вручную и перезапустить счетчик

## Структура проекта

- `main.go` - основной файл с логикой мониторинга и веб-сервером
- `services.json` - файл с сохраненным списком сервисов (создается автоматически)
- `Dockerfile` - файл для сборки Docker образа
- `docker-compose.yml` - файл для запуска через Docker Compose (создается через Makefile)
- `data/` - директория для хранения данных в Docker (volume)
- `go.mod` - файл модуля Go
- `Makefile` - команды для сборки и запуска
- `README.md` - документация
## Docker

### Особенности Docker версии

- Приложение автоматически определяет, запущено ли оно в Docker контейнере
- В Docker данные сохраняются в `/app/data/services.json`
- Volume `./data:/app/data` обеспечивает сохранность данных между перезапусками
- Используется многоэтапная сборка для минимального размера образа
- Приложение запускается от непривилегированного пользователя

### Docker команды

```bash
# Сборка образа
make docker-build

# Создание docker-compose.yml
make docker-compose PORT=8080

# Запуск контейнера
make docker-up PORT=8080

# Остановка контейнера
make docker-down

# Полная очистка (образы, контейнеры, volumes)
make docker-clean
```

### Ручной запуск Docker

```bash
# Сборка образа
docker build -t web-monitor:latest .

# Создание volume директории
mkdir -p ./data

# Запуск контейнера
docker run -d \
  --name web-monitor \
  -p 8080:8080 \
  -v $(pwd)/data:/app/data \
  web-monitor:latest -port=8080
```